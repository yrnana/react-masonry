{"version":3,"file":"index.3af9e375.js","sources":["../../vite/modulepreload-polyfill","../../react/jsx-runtime","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import * as jsxRuntime from \"/home/runner/work/react-masonry/react-masonry/node_modules/react/jsx-runtime.js\"\nexport const jsx = jsxRuntime.jsx\nexport const jsxs = jsxRuntime.jsxs\nexport const Fragment = jsxRuntime.Fragment","import { useEffect, useMemo, useRef, useState } from 'react';\nimport cx from 'classnames';\nimport Masonry from 'masonry-layout';\nimport { useThrottledCallback } from 'use-debounce';\nimport './App.scss';\n\nconst imageCategories = ['animals', 'arch', 'nature', 'people', 'tech'];\n\nfunction App() {\n  const [categoriesState, setCategoriesState] = useState(\n    imageCategories.map((_) => true),\n  );\n\n  const elementRef = useRef<HTMLDivElement>(null);\n  const masonryRef = useRef<Masonry>();\n\n  const images = useMemo(() => {\n    const trueCount = categoriesState.filter(Boolean).length;\n    const availableCategories = imageCategories.filter(\n      (_, idx) => categoriesState[idx],\n    );\n    return Array.from(\n      { length: 20 },\n      (_v, _k) =>\n        `https://placeimg.com/400/${getRandomInt(200, 500)}/${\n          availableCategories[getRandomInt(0, trueCount)]\n        }`,\n    );\n  }, [categoriesState]);\n\n  const handleLayout = useThrottledCallback(() => {\n    masonryRef.current?.layout?.();\n  }, 500);\n\n  const handleCategoryClick = (category: string) => {\n    const idx = imageCategories.indexOf(category);\n    categoriesState[idx] = !categoriesState[idx];\n    setCategoriesState([...categoriesState]);\n  };\n\n  useEffect(() => {\n    const element = elementRef.current;\n    if (element) {\n      masonryRef.current = new Masonry(element, {\n        columnWidth: '.grid-sizer',\n        itemSelector: '.grid-item',\n        percentPosition: true,\n      });\n      return () => masonryRef.current?.destroy?.();\n    }\n  }, [images]);\n\n  return (\n    <div>\n      <div className=\"button-group\">\n        {imageCategories.map((category, idx) => (\n          <button\n            key={category}\n            className={cx({\n              selected: categoriesState[idx],\n            })}\n            onClick={() => handleCategoryClick(category)}\n          >\n            {category}\n          </button>\n        ))}\n      </div>\n      <div className=\"grid\" ref={elementRef}>\n        <div className=\"grid-sizer\" />\n        {images.map((image, idx) => (\n          <div key={`${image}_${idx}`} className=\"grid-item\">\n            <img src={image} onLoad={handleLayout} alt=\"\" />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n\n/**\n * 두 값 사이의 정수 난수 반환 (min ~ max)\n * @param min\n * @param max\n * @returns {number}\n */\nfunction getRandomInt(min: number, max: number) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"names":["jsxRuntime.jsx","jsxRuntime.jsxs","imageCategories","categoriesState","setCategoriesState","useState","map","_","elementRef","useRef","masonryRef","images","useMemo","trueCount","filter","Boolean","length","availableCategories","idx","Array","from","_v","_k","getRandomInt","handleLayout","useThrottledCallback","current","layout","handleCategoryClick","category","indexOf","element","Masonry","columnWidth","itemSelector","percentPosition","destroy","cx","selected","image","min","max","Math","ceil","floor","random","ReactDOM","render","document","getElementById"],"mappings":"mFAAA,KAAM,GAAI,UAAoB,CAC1B,KAAM,GAAU,SAAS,cAAc,QAAQ,QAC/C,GAAI,GAAW,EAAQ,UAAY,EAAQ,SAAS,iBAChD,OAEJ,SAAW,KAAQ,UAAS,iBAAiB,6BACzC,EAAe,GAEnB,GAAI,kBAAiB,AAAC,GAAc,CAChC,SAAW,KAAY,GACnB,GAAI,EAAS,OAAS,YAGtB,SAAW,KAAQ,GAAS,WACxB,AAAI,EAAK,UAAY,QAAU,EAAK,MAAQ,iBACxC,EAAe,KAG5B,QAAQ,SAAU,CAAE,UAAW,GAAM,QAAS,KACjD,WAAsB,EAAQ,CAC1B,KAAM,GAAY,GAClB,MAAI,GAAO,WACP,GAAU,UAAY,EAAO,WAC7B,EAAO,gBACP,GAAU,eAAiB,EAAO,gBACtC,AAAI,EAAO,cAAgB,kBACvB,EAAU,YAAc,UACvB,AAAI,EAAO,cAAgB,YAC5B,EAAU,YAAc,OAExB,EAAU,YAAc,cACrB,EAEX,WAAwB,EAAM,CAC1B,GAAI,EAAK,GAEL,OACJ,EAAK,GAAK,GAEV,KAAM,GAAY,EAAa,GAC/B,MAAM,EAAK,KAAM,KAEvB,AAAoB,ICzCf,KAAM,GAAMA,cACN,EAAOC,eCIdC,EAAkB,CAAC,UAAW,OAAQ,SAAU,SAAU,QAEhE,YAAe,MACP,CAACC,EAAiBC,GAAsBC,mBAC5CH,EAAgBI,IAAKC,GAAM,KAGvBC,EAAaC,iBAAuB,MACpCC,EAAaD,mBAEbE,EAASC,kBAAQ,IAAM,MACrBC,GAAYV,EAAgBW,OAAOC,SAASC,OAC5CC,EAAsBf,EAAgBY,OAC1C,CAACP,EAAGW,IAAQf,EAAgBe,UAEvBC,OAAMC,KACX,CAAEJ,OAAQ,IACV,CAACK,EAAIC,IACF,4BAA2BC,EAAa,IAAK,QAC5CN,EAAoBM,EAAa,EAAGV,QAGzC,CAACV,IAEEqB,EAAeC,EAAqB,IAAM,iBACnCC,wBAASC,0BACnB,KAEGC,EAAsB,AAACC,GAAqB,MAC1CX,GAAMhB,EAAgB4B,QAAQD,KACpBX,GAAO,CAACf,EAAgBe,KACrB,CAAC,GAAGf,gCAGf,IAAM,MACR4B,GAAUvB,EAAWkB,WACvBK,WACSL,QAAU,GAAIM,GAAQD,EAAS,CACxCE,YAAa,cACbC,aAAc,aACdC,gBAAiB,KAEZ,aAAMzB,cAAWgB,UAAXhB,cAAoB0B,UAApB1B,wBAEd,CAACC,gCAIK,UAAU,wBACZT,EAAgBI,IAAI,CAACuB,EAAUX,gBAG5B,UAAWmB,EAAG,CACZC,SAAUnC,EAAgBe,KAE5B,QAAS,IAAMU,EAAoBC,YAElCA,GANIA,eAUN,UAAU,OAAO,IAAKrB,qBACpB,UAAU,eACdG,EAAOL,IAAI,CAACiC,EAAOrB,aACW,UAAU,8BAChC,IAAKqB,EAAO,OAAQf,EAAc,IAAI,MADlC,GAAEe,KAASrB,YAiBhC,WAAsBsB,EAAaC,EAAa,UACxCC,KAAKC,KAAKH,KACVE,KAAKE,MAAMH,GACVC,KAAKE,MAAMF,KAAKG,YAAkBL,IAAQA,ECtFnDM,EAASC,SACN,EAAM,uBACJ,QAEHC,SAASC,eAAe"}